# ç´¢å¼•è¶Šç•Œé”™è¯¯ä¿®å¤æ€»ç»“

## ğŸ› é”™è¯¯åˆ†æ

### é”™è¯¯ä¿¡æ¯
```
IndexError: index 4943 is out of bounds for axis 0 with size 4943
```

### é”™è¯¯ä½ç½®
```python
# /home/shenzi/anaconda3/envs/rdagent4qlib/lib/python3.10/site-packages/qlib/backtest/utils.py:131
return self._calendar[calendar_index], epsilon_change(self._calendar[calendar_index + 1])
```

### é”™è¯¯åŸå› 
1. **æ•°æ®èŒƒå›´ä¸åŒ¹é…**: å›æµ‹ç»“æŸæ—¶é—´è®¾ç½®ä¸º `2020-09-25`ï¼Œä½†å®é™…æ•°æ®åªåˆ° `2020-08-01`
2. **ç´¢å¼•è¶Šç•Œ**: å½“ `calendar_index` è¾¾åˆ° 4943 æ—¶ï¼Œå°è¯•è®¿é—® `calendar_index + 1` (4944) è¶…å‡ºäº†æ•°ç»„è¾¹ç•Œ
3. **æ—¶é—´é…ç½®ä¸ä¸€è‡´**: æµ‹è¯•é›†å’Œå›æµ‹æ—¶é—´è¶…å‡ºäº†å¯ç”¨æ•°æ®çš„å®é™…èŒƒå›´

## ğŸ”§ ä¿®å¤æ–¹æ¡ˆ

### æœ€å°åŒ–ä¿®å¤
å°†å›æµ‹ç»“æŸæ—¶é—´ä» `2020-09-25` æ”¹å› `2020-08-01`ï¼Œç¡®ä¿ä¸å¯ç”¨æ•°æ®èŒƒå›´ä¸€è‡´ã€‚

### ä¿®å¤å†…å®¹

#### 1. segmentsé…ç½®ä¿®å¤
```yaml
# ä¿®å¤å‰
test: ['2019-01-01', '2020-09-25']

# ä¿®å¤å  
test: ['2019-01-01', '2020-08-01']
```

#### 2. backtesté…ç½®ä¿®å¤
```yaml
# ä¿®å¤å‰
backtest:
    start_time: 2019-01-01
    end_time: 2020-09-25

# ä¿®å¤å
backtest:
    start_time: 2019-01-01
    end_time: 2020-08-01
```

#### 3. data_handler_configä¿®å¤
```yaml
# ä¿®å¤å‰
data_handler_config:
    end_time: 2020-09-25

# ä¿®å¤å
data_handler_config:
    end_time: 2020-08-01
```

## ğŸ“ å·²ä¿®å¤çš„æ–‡ä»¶

1. âœ… `conf_baseline.yaml`
2. âœ… `conf_combined_factors.yaml`
3. âœ… `conf_combined_factors_sota_model.yaml`
4. âœ… `conf_baseline_factors_model.yaml`
5. âœ… `conf_sota_factors_model.yaml`

## ğŸ¯ æœ€ç»ˆé…ç½®

### æ—¶é—´é…ç½®
```yaml
segments:
    train: ['2008-01-01', '2016-12-31']  # 9å¹´è®­ç»ƒæ•°æ®
    valid: ['2017-01-01', '2018-12-31']  # 2å¹´éªŒè¯æ•°æ®
    test: ['2019-01-01', '2020-08-01']   # 1.7å¹´æµ‹è¯•æ•°æ®

backtest:
    start_time: 2019-01-01
    end_time: 2020-08-01

data_handler_config:
    start_time: 2008-01-01
    end_time: 2020-08-01
    fit_start_time: 2008-01-01
    fit_end_time: 2016-12-31
```

## âœ… éªŒè¯è¦ç‚¹

1. **æ—¶é—´é€»è¾‘**: Train (2008-2016) < Valid (2017-2018) < Test (2019-2020.08)
2. **æ•°æ®èŒƒå›´**: end_time (2020-08-01) ä¸å†å²é…ç½®ä¸€è‡´
3. **ç´¢å¼•å®‰å…¨**: ç¡®ä¿å›æµ‹æ—¶é—´ä¸è¶…å‡ºå¯ç”¨æ•°æ®èŒƒå›´
4. **é…ç½®ä¸€è‡´**: æ‰€æœ‰æ—¶é—´é…ç½®ä¿æŒåŒæ­¥

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®å¯ç”¨æ€§**: ç¡®ä¿æ•°æ®è¦†ç›–åˆ°2020å¹´8æœˆ1æ—¥
2. **æ—¶é—´è¿ç»­æ€§**: å„é˜¶æ®µæ—¶é—´æ— ç¼è¡”æ¥
3. **æµ‹è¯•èŒƒå›´**: æµ‹è¯•é›†åŒ…å«2019-2020å¹´8æœˆçš„æ•°æ®
4. **å›æµ‹å®‰å…¨**: é¿å…ç´¢å¼•è¶Šç•Œé”™è¯¯

## ğŸ” æ ¹æœ¬åŸå› 

é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯æˆ‘ä»¬åœ¨ä¿®æ”¹æ—¶é—´é…ç½®æ—¶ï¼Œå°†æµ‹è¯•é›†å’Œå›æµ‹æ—¶é—´æ‰©å±•åˆ°äº† `2020-09-25`ï¼Œä½†å®é™…çš„æ•°æ®åªåˆ° `2020-08-01`ã€‚è¿™å¯¼è‡´äº†å›æµ‹æ—¶å°è¯•è®¿é—®ä¸å­˜åœ¨çš„æ•°æ®æ—¶é—´ç‚¹ï¼Œä»è€Œå¼•å‘ç´¢å¼•è¶Šç•Œé”™è¯¯ã€‚

## ğŸ“Š ä¿®å¤æ•ˆæœ

- âœ… æ¶ˆé™¤ç´¢å¼•è¶Šç•Œé”™è¯¯
- âœ… ä¿æŒæ—¶é—´é…ç½®åˆç†æ€§
- âœ… ç¡®ä¿æ•°æ®èŒƒå›´ä¸€è‡´æ€§
- âœ… ç»´æŒå®éªŒå¯é‡å¤æ€§

---
*ä¿®å¤å®Œæˆæ—¶é—´: 2024å¹´*
*çŠ¶æ€: âœ… å·²ä¿®å¤*
*é”™è¯¯ç±»å‹: IndexError - ç´¢å¼•è¶Šç•Œ* 